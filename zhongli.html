<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>重力感应</title>
<style>
#box{ width:100px; height:100px; background:#00F;}
</style>
</head>
<script>
function rnd(n,m){
	return parseInt(Math.random()*(m-n)+n);
};
if(window.DeviceMotionEvent){
	var lastX=0;
	var lastY=0;
	var lastZ=0;
	
	window.addEventListener('devicemotion',function(ev){
		var msg = ev.accelerationIncludingGravity;
		setInterval(function(){
			//document.write('x轴:'+msg.x+'\n'+'y轴:'+msg.y+'\n'+'z轴:'+msg.z+'\n'+'<br>');
			if(Math.abs(msg.x-lastX)>20||Math.abs(msg.y-lastY)>20||Math.abs(msg.z-lastZ)>20){
				//alert('yaole');
				document.getElementById('box').style.background='rgb('+rnd(0,256)+','+rnd(0,256)+','+rnd(0,256)+')';
			}
			lastX=msg.x;
			lastY=msg.y;
			lastZ=msg.z;
		},500);
		
	},false)
}else{
	alert('不支持');
}
</script>

<body>
<div id="box"></div>
</body>
</html>
